<?php
require_once __DIR__.'\..\Controller\InputValidator.php';
require_once __DIR__.'\..\Persistence\PersistenceTAMAS.php';
require_once __DIR__.'\..\Model\ApplicationManager.php';
require_once __DIR__.'\..\Model\Application.php';

class ApplicationController{
	
	public function __construct(){
	}
	
	public function createJob($startTime, $endTime, $salary, 
							$requirements, $course, $instructor) {
		//1. Validate input
// 		$startTime = InputValidator::validate_date($startTime);			//TODO check with harley how he validated date
// 		$endTime = InputValidator::validate_date($endTime);
		$requirements = InputValidator::validate_input($requirements);

	
		if($uName==null || strlen($uName) == 0){
			throw new Exception("Username name cannot be empty!");
		} else if($pass==null || strlen($pass) == 0){
			throw new Exception("Password name cannot be empty!");
		} elseif($fName==null || strlen($fName) == 0){
			throw new Exception("First name name cannot be empty!");
		} elseif($lName==null || strlen($lName) == 0){
			throw new Exception("Last name name cannot be empty!");
		} else {
			//2. Load all of the data
			$pt = new PersistenceTAMAS();
			$am = $pt->loadApplicationManagerFromStore();
	
			//3. Add the new particpant
			$job = new Job($startTime, $endTime, $salary, $requirements, $course, $instructor);
			$am->addJob($job);
	
			//4. Write all the data
			$pt->writeApplicationDataToStore($am);
		}
	}
}
?>