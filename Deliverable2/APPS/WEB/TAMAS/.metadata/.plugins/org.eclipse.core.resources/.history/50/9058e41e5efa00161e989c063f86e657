<?php
require_once __DIR__.'\..\Controller\InputValidator.php';
require_once __DIR__.'\..\Persistence\PersistenceTAMAS.php';
require_once __DIR__.'\..\Model\ApplicationManager.php';
require_once __DIR__.'\..\Model\ProfileManager.php';
require_once __DIR__.'\..\Model\CourseManager.php';

class CourseController{
	
	public function __construct(){
	}
	
	public function createCourse($class_name, $CDN, 
								$graderTimeBudget, $TATimeBudget) {
		//1. Validate input
		$name = InputValidator::validate_input($class_name);
		if($name==null || strlen($name) == 0){
			throw new Exception("Course name cannot be empty!");
		} else if(!is_numeric($CDN)) {
			throw new Exception("CDN must be a non null Integer!");
		} else if((!is_numeric($graderTimeBudget)) || (!is_numeric($TATimeBudget))) {
			throw new Exception("Time budget must be a non null Integer!");
		} else {
			//2. Load all of the data
			$pm = new PersistenceTAMAS();
			$am = $pm->loadCourseManagerFromStore();
				
			//3. Add the new particpant
			$course = new Course($aClassName, $aCdn, $aGraderTimeBudget, $aTaTimeBudget)
			$rm->addParticipant($participant);
				
			//4. Write all the data
			$pm->writeDataToStore($rm);
		}
	}

}
?>